<!--
@license
Copyright (c) 2016 The Jviz Project Authors. All rights reserved.
The Jviz Project is under the MIT License. See https://github.com/jviz/jviz/blob/dev/LICENSE
-->

<!-- Import dependencies -->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../jviz/jviz.html">
<link rel="import" href="../jviz-styles/jviz-styles.html">
<link rel="import" href="../jviz-btn/jviz-btn.html">
<link rel="import" href="../jviz-input/jviz-input.html">
<link rel="import" href="../jviz-select/jviz-select.html">

<!-- Page control element -->
<dom-module id="jviz-table-page">
  <template>
    <style>
      :host
      {
        display: block;
        width: 100%;
        margin-top: 10px;
        margin-bottom: 10px;
      }
      :host .text
      {
        display: inline-block;
        height: 30px;
        line-height: 30px;
        padding-left: 15px;
        padding-right: 15px;
        vertical-align: top;
      }
    </style>
    <div class="text">Rows per page:</div>
    <jviz-select id="entries" width="100px"></jviz-select>
    <jviz-btn color="grey" icon="chevron_left" text="Prev" on-tap="page_prev" icon-align="left"></jviz-btn>
    <div id="counter" class="text">Page <b>{{ page }}</b> of <b>{{ total }}</b></div>
    <jviz-btn color="grey" icon="chevron_right" text="Next" on-tap="page_next" icon-align="right"></jviz-btn>
  </template>
</dom-module>

<!-- Page control logic -->
<script>
  //Initialize the table page control object
  var jviz_table_page = { is: 'jviz-table-page' };

  //Page properties
  jviz_table_page.properties = {};
  jviz_table_page.properties.entries = { type: Number, reflectToAttribute: true, observer: '_update_entries' };
  jviz_table_page.properties.page = { type: Number, reflectToAttribute: true, observer: '_update_page', value: 1 };
  jviz_table_page.properties.total = { type: Number, reflectToAttribute: true, value: 1 };


  //Update the entries
  jviz_table_page._update_entries = function(value)
  {
    //Initialize the entries list
    var entries = [];

    //Split the entries by comma
    value.split(',').forEach(function(el, index)
    {
      //Initialize the option object
      var obj = { value: el, text: el, selected: false };

      //Check for -1 value
      if(value === '-1'){ obj.text = 'All'; }
    });

    //Update the entries values
    this.$.entries.options = entries;
  };

  //Update the actual page
  jviz_table_page._update_page = function(value)
  {

  };

  //Next page
  jviz_table_page.page_next = function()
  {

  };

  //Prev page
  jviz_table_page.page_prev = function()
  {

  };

  //Register the table page element
  Polymer(jviz_table_page);
</script>

